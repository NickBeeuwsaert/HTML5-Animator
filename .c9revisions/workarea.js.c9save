{"ts":1351470310400,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"/*globals requestAnimationFrame:false,superCanvas:false */\nvar drawWorkspace;\n(function(){\n    var canvas = document.querySelector(\"#anim-canvas\");\n    var parent = canvas.parentNode;\n    \n    var context = superCanvas(canvas);\n    //for now, get use these dimensions\n    var width = 480;\n    var height = 280;\n    var rMargin, bMargin, lMargin, tMargin;\n    lMargin = rMargin = width  / 2;\n    tMargin = bMargin = height / 2;\n    function getAtFrame(doc, frame){\n        var frames = [];\n        for(var i = 0; i < doc.documentElement.childNodes.length; i++){\n            var layerNode = doc.documentElement.childNodes[i];\n            if(layerNode.nodeName !== \"g\") continue;\n            var at = 0;\n            var f = false;\n            var l = 0;\n            for(var k = 0; k < layerNode.childNodes.length; k++){\n                frameNode = layerNode.childNodes[k];\n                if(frameNode.nodeName !== \"g\") continue;\n                l = k;\n                var length = parseFloat(frameNode.getAttributeNS(animatorNamespace, \"length\"))||1;\n                var s = at;\n                var e = at+length;\n                if(frame  >= s && frame < e){\n                    frames.push(frameNode);\n                    f = true;\n                    break;\n                }\n                at+=length;\n            }\n            if(!f){\n                frames.push(layerNode.childNodes[l]);\n            }\n        }\n        return frames;\n    }\n    function drawGroup(ctx, group){\n        for(var i = 0; i < group.childNodes.length; i++){\n            var element = group.childNodes[i];\n            if(element.nodeName == \"g\"){\n                drawGroup(ctx, element);\n            }else if(element.nodeName == \"path\"){\n                ctx.beginPath();\n                ctx.drawPath(element.getAttribute(\"d\"));\n                ctx.stroke();\n                ctx.closePath();\n            }\n        }\n    }\n    function draw(doc){\n        width = parseFloat(doc.documentElement.getAttribute(\"width\"));\n        height = parseFloat(doc.documentElement.getAttribute(\"height\"));\n        canvas.width = Math.max(width, parent.clientWidth)*2;\n        canvas.height = Math.max(height, parent.clientHeight)*2;\n        \n        \n        // draw a white square for the canvas\n        \n        var x = (canvas.width - width)/2;\n        var y = (canvas.height - height)/2;\n        context.beginPath();\n        context.fillStyle=\"#777\";\n        context.rect(x+4, y+4, width, height);\n        context.fill();\n        context.closePath();\n        \n        context.beginPath();\n        context.fillStyle=\"black\";\n        context.rect(x-1, y-1, width+2, height+2);\n        context.fill();\n        context.closePath();\n        \n        context.beginPath();\n        context.fillStyle=\"white\";\n        context.rect(x, y, width, height);\n        context.fill();\n        context.closePath();\n        \n        //draw the frame...\n        \n        var layers = getAtFrame(doc, getCurrentFrame());\n        context.translate(x, y);\n        context.fillStyle = \"black\";\n        context.strokeStyle = \"black\";\n        \n        for(var i = 0; i < layers.length; i++){\n            var layer = layers[i];\n            drawGroup(context, layer);\n        }\n        //requestAnimationFrame(function(){draw(doc);});\n    }\n    \n    // draw();\n    drawWorkspace = draw;\n    \n})();"]],"start1":0,"start2":0,"length1":0,"length2":3337}]],"length":3337}
{"contributors":[],"silentsave":false,"ts":1351470310289,"patch":[[{"diffs":[[1,"/*globals requestAnimationFrame:false,superCanvas:false */\nvar drawWorkspace;\n(function(){\n    var canvas = document.querySelector(\"#anim-canvas\");\n    var parent = canvas.parentNode;\n    \n    var context = superCanvas(canvas);\n    //for now, get use these dimensions\n    var width = 480;\n    var height = 280;\n    var rMargin, bMargin, lMargin, tMargin;\n    lMargin = rMargin = width  / 2;\n    tMargin = bMargin = height / 2;\n    function getAtFrame(doc, frame){\n        var frames = [];\n        for(var i = 0; i < doc.documentElement.childNodes.length; i++){\n            var layerNode = doc.documentElement.childNodes[i];\n            if(layerNode.nodeName !== \"g\") continue;\n            var at = 0;\n            var f = false;\n            var l = 0;\n            for(var k = 0; k < layerNode.childNodes.length; k++){\n                frameNode = layerNode.childNodes[k];\n                if(frameNode.nodeName !== \"g\") continue;\n                l = k;\n                var length = parseFloat(frameNode.getAttributeNS(animatorNamespace, \"length\"))||1;\n                var s = at;\n                var e = at+length;\n                if(frame  >= s && frame < e){\n                    frames.push(frameNode);\n                    f = true;\n                    break;\n                }\n                at+=length;\n            }\n            if(!f){\n                frames.push(layerNode.childNodes[l]);\n            }\n        }\n        return frames;\n    }\n    function drawGroup(ctx, group){\n        for(var i = 0; i < group.childNodes.length; i++){\n            var element = group.childNodes[i];\n            if(element.nodeName == \"g\"){\n                drawGroup(ctx, element);\n            }else if(element.nodeName == \"path\"){\n                ctx.beginPath();\n                ctx.drawPath(element.getAttribute(\"d\"));\n                ctx.stroke();\n                ctx.closePath();\n            }\n        }\n    }\n    function draw(doc){\n        width = parseFloat(doc.documentElement.getAttribute(\"width\"));\n        height = parseFloat(doc.documentElement.getAttribute(\"height\"));\n        canvas.width = Math.max(width, parent.clientWidth)*2;\n        canvas.height = Math.max(height, parent.clientHeight)*2;\n        \n        \n        // draw a white square for the canvas\n        \n        var x = (canvas.width - width)/2;\n        var y = (canvas.height - height)/2;\n        context.beginPath();\n        context.fillStyle=\"#777\";\n        context.rect(x+4, y+4, width, height);\n        context.fill();\n        context.closePath();\n        \n        context.beginPath();\n        context.fillStyle=\"black\";\n        context.rect(x-1, y-1, width+2, height+2);\n        context.fill();\n        context.closePath();\n        \n        context.beginPath();\n        context.fillStyle=\"white\";\n        context.rect(x, y, width, height);\n        context.fill();\n        context.closePath();\n        \n        //draw the frame...\n        \n        var layers = getAtFrame(doc, getCurrentFrame());\n        context.translate(x, y);\n        context.fillStyle = \"black\";\n        context.strokeStyle = \"black\";\n        \n        for(var i = 0; i < layers.length; i++){\n            var layer = layers[i];\n            drawGroup(context, layer);\n        }\n        //requestAnimationFrame(function(){draw(doc);});\n    }\n    \n    // draw();\n    drawWorkspace = draw;\n    \n})();"]],"start1":0,"start2":0,"length1":0,"length2":3337}]],"length":3337,"saved":false}
